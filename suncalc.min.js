(function(){var u=Math.PI,a=Math.sin,c=Math.cos,z=Math.tan,o=Math.asin,k=Math.atan2,r=Math.acos,D=u/180;var B=1000*60*60*24,g=2440588,G=2451545;function v(e){return e.valueOf()/B-0.5+g}function C(e){return new Date((e+0.5-g)*B)}function j(e){return v(e)-G}var A=D*23.4397;function h(I,e){return k(a(I)*c(A)-z(e)*a(A),c(I))}function p(I,e){return o(a(e)*c(A)+c(e)*a(A)*a(I))}function w(e,I,J){return k(a(e),c(e)*a(I)-z(J)*c(I))}function l(e,I,J){return o(a(I)*a(J)+c(I)*c(J)*c(e))}function x(I,e){return D*(280.16+360.9856235*I)-e}function F(e){return D*(357.5291+0.98560028*e)}function t(J){var I=D*(1.9148*a(J)+0.02*a(2*J)+0.0003*a(3*J)),e=D*102.9372;return J+I+e+u}function y(I){var J=F(I),e=t(J);return{dec:p(e,0),ra:h(e,0)}}var i={};i.getPosition=function(I,M,e){var L=D*-e,K=D*M,N=j(I),O=y(N),J=x(N,L)-O.ra;return{azimuth:w(J,K,O.dec),altitude:l(J,K,O.dec)}};var n=i.times=[[-0.833,"sunrise","sunset"],[-0.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];i.addTime=function(I,J,e){n.push([I,J,e])};var f=0.0009;function s(I,e){return Math.round(I-f-e/(2*u))}function q(e,I,J){return f+(e+I)/(2*u)+J}function d(I,J,e){return G+I+0.0053*a(J)-0.0069*a(2*e)}function E(e,I,J){return r((a(e)-a(I)*a(J))/(c(I)*c(J)))}function m(K,I,N,J,e,O,P){var R=E(K,N,J),Q=q(R,I,e);return d(Q,O,P)}i.getTimes=function(Z,J,aa){var I=D*-aa,e=D*J,X=j(Z),T=s(X,I),S=q(0,I,T),N=F(S),O=t(N),R=p(O,0),Y=d(S,N,O),V,W,K,Q,U;var P={solarNoon:C(Y),nadir:C(Y-0.5)};for(V=0,W=n.length;V<W;V+=1){K=n[V];Q=m(K[0]*D,I,e,R,T,N,O);U=Y-(Q-Y);P[K[1]]=C(U);P[K[2]]=C(Q)}return P};function H(O){var I=D*(218.316+13.176396*O),P=D*(134.963+13.064993*O),N=D*(93.272+13.22935*O),J=I+D*6.289*a(P),e=D*5.128*a(N),K=385001-20905*c(P);return{ra:h(J,e),dec:p(J,e),dist:K}}i.getMoonPosition=function(I,N,O){var e=D*-O,K=D*N,L=j(I),M=H(L),P=x(L,e)-M.ra,J=l(P,K,M.dec);J=J+D*0.017/z(J+D*10.26/(J+D*5.1));return{azimuth:w(P,K,M.dec),altitude:J,distance:M.dist}};i.getMoonIllumination=function(I){var O=j(I),J=y(O),e=H(O),L=149598000,K=r(a(J.dec)*a(e.dec)+c(J.dec)*c(e.dec)*c(J.ra-e.ra)),M=k(L*a(K),e.dist-L*c(K)),N=k(c(J.dec)*a(J.ra-e.ra),a(J.dec)*c(e.dec)-c(J.dec)*a(e.dec)*c(J.ra-e.ra));return{fraction:(1+c(M))/2,phase:0.5+0.5*M*(N<0?-1:1)/Math.PI,angle:N}};function b(e,I){return new Date(e.valueOf()+I*B/24)}i.getMoonTimes=function(Y,J,ab){var R=new Date(Y);R.setHours(0);R.setMinutes(0);R.setSeconds(0);R.setMilliseconds(0);var K=0.133*D,O=i.getMoonPosition(R,J,ab).altitude-K,N,M,I,S,aa,Z,T,e,X,L,W,V,Q;for(var U=1;U<=24;U+=2){N=i.getMoonPosition(b(R,U),J,ab).altitude-K;M=i.getMoonPosition(b(R,U+1),J,ab).altitude-K;aa=(O+M)/2-N;Z=(M-O)/2;T=-Z/(2*aa);e=(aa*T+Z)*T+N;X=Z*Z-4*aa*N;L=0;if(X>=0){Q=Math.sqrt(X)/(Math.abs(aa)*2);W=T-Q;V=T+Q;if(Math.abs(W)<=1){L++}if(Math.abs(V)<=1){L++}if(W<-1){W=V}}if(L===1){if(O<0){I=U+W}else{S=U+W}}else{if(L===2){I=U+(e<0?V:W);S=U+(e<0?W:V)}}if(I&&S){break}O=M}var P={};if(I){P.rise=b(R,I)}if(S){P.set=b(R,S)}if(!I&&!S){P[e>0?"alwaysUp":"alwaysDown"]=true}return P};if(typeof define==="function"&&define.amd){define(i)}else{if(typeof module!=="undefined"){module.exports=i}else{window.SunCalc=i}}}());